---
import Pattern from "@/components/ui/pattern.astro";
import PageLayout from "@/layouts/page-layout.astro";
import Box from "@/components/box/index.astro";
import BoxHeader from "@/components/box/header.astro";
import BoxTitle from "@/components/box/title.astro";
import { Github, Code2, ExternalLink } from "lucide-react";

const projects = [
  {
    id: "project1",
    name: "Graphs in Java",
    description: "A Graph beginner Project implemented with Java, exploring graph theory concepts and algorithms.",
    sourceCode: "https://github.com/aldinisma/Graphen-in-Java",
    screenshot: "", // Optional: "/screenshots/graphs.png"
    technologies: ["Java", "Graph Theory", "Algorithms"],
    type: "side",
  },       
  {
    id: "project2",
    name: "Complex Numbers with WPF",
    description: "A WPF-Project with Complex Numbers featuring visualization and mathematical operations.",
    sourceCode: "https://github.com/aldinisma/ComplexNumbersWithWPF",
    screenshot: "", // Optional: "/screenshots/complex.png"
    technologies: ["C#", "WPF", ".NET", "Mathematics"],
    type: "side",
  },
  {
    id: "project3",
    name: "Binarytree visualized in JavaFX",
    description: "A JavaFX Project with Binary trees including interactive visualization and tree operations.",
    sourceCode: "https://github.com/aldinisma/BinaryTree-in-Java-and-JavaFx",
    screenshot: "", // Optional: "/screenshots/binarytree.png"
    technologies: ["Java", "JavaFX", "Data Structures"],
    type: "side",
  },
  {
    id: "project4",
    name: "Zahlenraten on Azure",
    description: "A simple static Webapp deployed on Azure featuring a number guessing game.",
    sourceCode: "https://github.com/aldinisma/Zahlenraten-Azure-New-Attempt",
    screenshot: "", // Optional: "/screenshots/zahlenraten.png"
    technologies: ["HTML", "CSS", "JavaScript", "Azure"],
    type: "side",
  },
];

const coreProjects = projects.filter(p => p.type === "core");
const sideProjects = projects.filter(p => p.type === "side");
---

<PageLayout
  description="A collection of Projects I made in school"
  title="My Projects"
>
  <Pattern />

  <!-- Core Projects -->
  {coreProjects.length > 0 && coreProjects.map(project => (
    <>
      <Box>
        <BoxHeader>
          <BoxTitle>{project.name}</BoxTitle>
        </BoxHeader>
        
        <div class="p-6">
          <article class="group relative overflow-hidden rounded-xl border border-border bg-gradient-to-br from-background to-muted/20 transition-all duration-300 hover:border-blue-500/50 hover:shadow-2xl hover:shadow-blue-500/20">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-500/0 via-purple-500/0 to-pink-500/0 opacity-0 transition-opacity duration-500 group-hover:opacity-5"></div>

            <div class="relative p-6">
              {/* Screenshot if available */}
              {project.screenshot && (
                <div class="mb-6 overflow-hidden rounded-lg border border-border">
                  <img 
                    src={project.screenshot} 
                    alt={`${project.name} screenshot`}
                    class="w-full h-auto transition-transform duration-500 group-hover:scale-105"
                  />
                </div>
              )}

              {/* Description */}
              <p class="mb-4 text-base leading-relaxed text-foreground/90">
                {project.description}
              </p>

              {/* Tech Stack */}
              <div class="mb-4 flex flex-wrap gap-2">
                {project.technologies.map((tech) => (
                  <span class="inline-flex items-center rounded-lg border border-blue-500/30 bg-blue-500/5 px-3 py-1 text-xs font-semibold text-blue-600 dark:text-blue-400">
                    {tech}
                  </span>
                ))}
              </div>

              {/* Source Link */}
              {project.sourceCode && (
                <a
                  href={project.sourceCode}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 rounded-lg border border-border bg-background px-4 py-2 text-sm font-medium transition-all duration-200 hover:border-blue-500/50 hover:bg-blue-500/5 hover:shadow-lg hover:shadow-blue-500/20"
                >
                  <Github className="h-4 w-4" />
                  View Source Code
                  <ExternalLink className="h-3 w-3" />
                </a>
              )}
            </div>

            <div class="absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/5 to-transparent transition-transform duration-1000 group-hover:translate-x-full"></div>
          </article>
        </div>
      </Box>
      <Pattern />
    </>
  ))}

  <!-- Side Projects Grid -->
  {sideProjects.length > 0 && (
    <Box>
      <BoxHeader>
        <BoxTitle>School Projects</BoxTitle>
      </BoxHeader>

      <div class="grid gap-4 p-6 sm:grid-cols-2">
        {sideProjects.map((project, index) => (
          <article 
            class="group relative overflow-hidden rounded-xl border border-border bg-gradient-to-br from-background to-muted/20 transition-all duration-300 hover:scale-[1.02] hover:border-purple-500/50 hover:shadow-xl hover:shadow-purple-500/10"
            style={`animation-delay: ${index * 100}ms`}
          >
            <div class="absolute inset-0 bg-gradient-to-br from-purple-500/0 via-pink-500/0 to-blue-500/0 opacity-0 transition-opacity duration-500 group-hover:opacity-5"></div>

            <div class="relative p-6">
              {/* Header */}
              <div class="mb-4 flex items-start justify-between">
                <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-purple-500/10 transition-all duration-300 group-hover:scale-110 group-hover:bg-purple-500/20">
                  <Code2 className="h-5 w-5 text-purple-600 dark:text-purple-400" />
                </div>
              </div>

              {/* Screenshot if available */}
              {project.screenshot && (
                <div class="mb-4 overflow-hidden rounded-lg border border-border">
                  <img 
                    src={project.screenshot} 
                    alt={`${project.name} screenshot`}
                    class="w-full h-auto transition-transform duration-500 group-hover:scale-105"
                  />
                </div>
              )}

              <h3 class="mb-2 text-lg font-black text-foreground">
                {project.name}
              </h3>

              <p class="mb-4 text-sm leading-relaxed text-foreground/80">
                {project.description}
              </p>

              {/* Tech Stack */}
              <div class="mb-4 flex flex-wrap gap-1.5">
                {project.technologies.map((tech) => (
                  <span class="inline-flex items-center rounded-md border border-purple-500/30 bg-purple-500/5 px-2 py-0.5 text-xs font-medium text-purple-600 dark:text-purple-400">
                    {tech}
                  </span>
                ))}
              </div>

              {/* Source Link */}
              {project.sourceCode && (
                <a
                  href={project.sourceCode}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 text-sm font-medium text-purple-600 transition-colors hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300"
                >
                  <Github className="h-4 w-4" />
                  View Source
                  <ExternalLink className="h-3 w-3" />
                </a>
              )}
            </div>

            <div class="absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/5 to-transparent transition-transform duration-700 group-hover:translate-x-full"></div>
          </article>
        ))}
      </div>
    </Box>
  )}

  <Pattern />
</PageLayout>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  article {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
  }
</style>